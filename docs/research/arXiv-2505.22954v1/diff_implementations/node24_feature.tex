\begin{lstlisting}
Augment the existing 'editor' tool to support line or token-based editing. The agent would specify individual lines or tokens to insert, delete, or replace. Internally, the tool would parse the file contents, apply changes atomically, and verify that the surrounding context remains intact. This prevents entire-file overwrites, reducing the risk of losing unrelated logic. The tool could also validate that the edited lines match expected code fragments to catch unanticipated differences or merge conflicts.

Enhance the agent's file editing process to support fine-grained edits. Specifically, add a line-based or token-based editing feature in the 'editor' tool. This improvement should let the agent insert, replace, or delete small sections of code without overwriting entire files or large blocks, preserving unrelated logic. Implement safeguards to confirm that contextual code around the edited region remains accurate, so we reduce the risk of creating regressions when fixing issues.
\end{lstlisting}