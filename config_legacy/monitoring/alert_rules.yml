groups:
- name: acgs-critical-alerts
  rules:
  - alert: ServiceDown
    annotations:
      description: Service {{ $labels.job }} on {{ $labels.instance }} has been down
        for more than 1 minute.
      summary: ACGS Service Down
    expr: up == 0
    for: 1m
    labels:
      severity: critical
  - alert: HighResponseTime
    annotations:
      description: 95th percentile response time is above 2s for {{ $labels.instance
        }}.
      summary: High Response Time
    expr: http_request_duration_seconds{quantile="0.95"} > 2
    for: 2m
    labels:
      severity: warning
  - alert: HighErrorRate
    annotations:
      description: Error rate is above 5% for {{ $labels.instance }}.
      summary: High Error Rate
    expr: rate(http_requests_total{status=~"5.."}[5m]) > 0.05
    for: 1m
    labels:
      severity: critical
  - alert: ConstitutionalComplianceFailure
    annotations:
      description: Constitutional compliance score is below 95% for {{ $labels.instance
        }}.
      summary: Constitutional Compliance Failure
    expr: constitutional_compliance_score < 0.95
    for: 30s
    labels:
      severity: critical
  - alert: CacheHitRateLow
    annotations:
      description: Cache hit rate is below 85% for {{ $labels.instance }}.
      summary: Low Cache Hit Rate
    expr: cache_hit_rate < 0.85
    for: 5m
    labels:
      severity: warning
