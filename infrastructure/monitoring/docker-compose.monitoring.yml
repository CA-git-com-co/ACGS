<!-- Constitutional Hash: cdd01ef066bc6cf2 -->
networks:
  acgs-monitoring:
    driver: bridge
    name: acgs-monitoring-network
services:
  alertmanager:
    container_name: acgs-alertmanager
    image: prom/alertmanager:latest
    networks:
    - acgs-monitoring
    ports:
    - 9093:9093
    volumes:
    - ./config/alertmanager.yml:/etc/alertmanager/alertmanager.yml:ro
  grafana:
    container_name: acgs-grafana
    depends_on:
    - prometheus
    environment:
      CONSTITUTIONAL_HASH: cdd01ef066bc6cf2
      GF_SECURITY_ADMIN_PASSWORD: os.environ.get("PASSWORD")
      GF_USERS_ALLOW_SIGN_UP: 'false'
    image: grafana/grafana:latest
    networks:
    - acgs-monitoring
    ports:
    - 3000:3000
    volumes:
    - grafana_data:/var/lib/grafana
    - ./config/grafana/dashboards:/etc/grafana/provisioning/dashboards:ro
    - ./config/grafana/datasources:/etc/grafana/provisioning/datasources:ro
  prometheus:
    command:
    - --config.file=/etc/prometheus/prometheus.yml
    - --storage.tsdb.path=/prometheus
    - --web.console.libraries=/etc/prometheus/console_libraries
    - --web.console.templates=/etc/prometheus/consoles
    - --storage.tsdb.retention.time=200h
    - --web.enable-lifecycle
    container_name: acgs-prometheus
    environment:
      CONSTITUTIONAL_HASH: cdd01ef066bc6cf2
    image: prom/prometheus:latest
    networks:
    - acgs-monitoring
    ports:
    - 9090:9090
    volumes:
    - ./config/prometheus.yml:/etc/prometheus/prometheus.yml:ro
    - ./config/rules:/etc/prometheus/rules:ro
    - prometheus_data:/prometheus

  # 5-Tier Router Metrics Exporter
  router-metrics-exporter:
    build:
      context: ./router-metrics-exporter
      dockerfile: Dockerfile
    container_name: acgs-router-metrics-exporter
    restart: unless-stopped
    ports:
      - "9200:9200"
    environment:
      - ROUTER_URL=http://hybrid-router:8000
      - CONSTITUTIONAL_HASH=cdd01ef066bc6cf2
      - TIER_1_TARGET_LATENCY=50
      - TIER_2_TARGET_LATENCY=100
      - TIER_3_TARGET_LATENCY=200
      - TIER_4_TARGET_LATENCY=600
      - TIER_5_TARGET_LATENCY=900
    networks:
    - acgs-monitoring
    depends_on:
    - prometheus

  # Node Exporter for system metrics
  node-exporter:
    image: prom/node-exporter:latest
    container_name: acgs-node-exporter
    restart: unless-stopped
    ports:
      - "9100:9100"
    networks:
    - acgs-monitoring
version: '3.8'
volumes:
  grafana_data: {}
  prometheus_data: {}

# Performance Targets: P99 <5ms, >100 RPS, >85% cache hit rates

**Constitutional Hash**: `cdd01ef066bc6cf2`

**Constitutional Hash**: `cdd01ef066bc6cf2`
# Constitutional Compliance: cdd01ef066bc6cf2
# Implementation Status: ðŸ”„ IN PROGRESS

# Performance Targets: P99 <5ms, >100 RPS, >85% cache hit rates
# Constitutional Compliance: cdd01ef066bc6cf2
# Implementation Status: ðŸ”„ IN PROGRESS

---

**Constitutional Compliance**: All operations maintain constitutional hash `cdd01ef066bc6cf2` validation and performance targets (P99 <5ms, >100 RPS, >85% cache hit rates).
