# ACGS Production Environment Configuration Template
# Copy this file to .env.production and fill in secure values
# NEVER commit actual secrets to version control

#------------------------------------------------------------------------------
# ACGS CORE CONFIGURATION
#------------------------------------------------------------------------------
ENVIRONMENT=production
CONSTITUTIONAL_HASH=cdd01ef066bc6cf2
ACGS_VERSION=4.0.0

#------------------------------------------------------------------------------
# DATABASE CONFIGURATION
#------------------------------------------------------------------------------
# PostgreSQL Database Settings
POSTGRES_DB=acgs_production
POSTGRES_USER=acgs_admin
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE

# Database URLs for services
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# Service-specific database users (recommended for production)
ACGS_AUTH_DB_USER=acgs_auth
ACGS_AUTH_DB_PASSWORD=CHANGE_ME_AUTH_PASSWORD

ACGS_CONSTITUTIONAL_DB_USER=acgs_constitutional
ACGS_CONSTITUTIONAL_DB_PASSWORD=CHANGE_ME_CONSTITUTIONAL_PASSWORD

ACGS_INTEGRITY_DB_USER=acgs_integrity
ACGS_INTEGRITY_DB_PASSWORD=CHANGE_ME_INTEGRITY_PASSWORD

ACGS_POLICY_DB_USER=acgs_policy
ACGS_POLICY_DB_PASSWORD=CHANGE_ME_POLICY_PASSWORD

ACGS_SYNTHESIS_DB_USER=acgs_synthesis
ACGS_SYNTHESIS_DB_PASSWORD=CHANGE_ME_SYNTHESIS_PASSWORD

#------------------------------------------------------------------------------
# REDIS CONFIGURATION
#------------------------------------------------------------------------------
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379

#------------------------------------------------------------------------------
# JWT AND AUTHENTICATION
#------------------------------------------------------------------------------
# JWT Secret Key - Generate with: openssl rand -base64 64
JWT_SECRET_KEY=CHANGE_ME_GENERATE_RANDOM_64_BYTE_KEY_HERE
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# Multi-tenant authentication settings
MULTI_TENANT_ENABLED=true
TENANT_ISOLATION_STRICT=true

#------------------------------------------------------------------------------
# NETWORK AND SECURITY
#------------------------------------------------------------------------------
# CORS Origins (comma-separated)
CORS_ORIGINS=https://acgs.yourdomain.com,https://app.yourdomain.com

# Allowed Hosts (comma-separated)
ALLOWED_HOSTS=acgs.yourdomain.com,app.yourdomain.com,localhost

# API Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=20

# TLS/SSL Configuration
SSL_ENABLED=true
SSL_CERT_PATH=/etc/nginx/certs/acgs.crt
SSL_KEY_PATH=/etc/nginx/certs/acgs.key
SSL_CA_PATH=/etc/nginx/certs/ca.crt

#------------------------------------------------------------------------------
# SERVICE DISCOVERY AND LOAD BALANCING
#------------------------------------------------------------------------------
# Service URLs (internal)
AUTH_SERVICE_URL=http://auth-service:8000
CONSTITUTIONAL_AI_SERVICE_URL=http://constitutional-ai-service:8001
INTEGRITY_SERVICE_URL=http://integrity-service:8002
GOVERNANCE_SYNTHESIS_SERVICE_URL=http://governance-synthesis-service:8004
POLICY_GOVERNANCE_SERVICE_URL=http://policy-governance-service:8005
FORMAL_VERIFICATION_SERVICE_URL=http://formal-verification-service:8006

# External URLs (public-facing)
ACGS_PUBLIC_URL=https://acgs.yourdomain.com
ACGS_API_URL=https://api.yourdomain.com

#------------------------------------------------------------------------------
# MONITORING AND LOGGING
#------------------------------------------------------------------------------
# Log Level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO
LOG_FORMAT=json

# Prometheus monitoring
PROMETHEUS_ENABLED=true
METRICS_PORT=9090

# Health check configuration
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

#------------------------------------------------------------------------------
# CONSTITUTIONAL COMPLIANCE
#------------------------------------------------------------------------------
# Constitutional AI Settings
CONSTITUTIONAL_VALIDATION_ENABLED=true
CONSTITUTIONAL_STRICT_MODE=true
CONSTITUTIONAL_TIMEOUT_SECONDS=30

# Formal Verification Settings
Z3_SOLVER_TIMEOUT_MS=30000
FORMAL_VERIFICATION_ENABLED=true

# Audit Trail Settings
AUDIT_TRAIL_ENABLED=true
CRYPTOGRAPHIC_AUDIT_ENABLED=true
AUDIT_RETENTION_DAYS=2555  # 7 years

#------------------------------------------------------------------------------
# PERFORMANCE AND SCALING
#------------------------------------------------------------------------------
# Worker Configuration
UVICORN_WORKERS=4
WORKER_CLASS=uvicorn.workers.UvicornWorker
WORKER_CONNECTIONS=1000

# Database Connection Pooling
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Redis Connection Pooling
REDIS_POOL_SIZE=10
REDIS_MAX_CONNECTIONS=50

# Cache Settings
CACHE_TTL_SECONDS=300
CACHE_MAX_SIZE_MB=128

#------------------------------------------------------------------------------
# BACKUP AND DISASTER RECOVERY
#------------------------------------------------------------------------------
# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=90

# S3 Backup Settings (if using AWS)
AWS_S3_BACKUP_BUCKET=acgs-backups-production
AWS_ACCESS_KEY_ID=CHANGE_ME_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=CHANGE_ME_AWS_SECRET_KEY
AWS_REGION=us-east-1

#------------------------------------------------------------------------------
# KUBERNETES CONFIGURATION (if deploying to K8s)
#------------------------------------------------------------------------------
KUBERNETES_NAMESPACE=acgs-production
ENABLE_LEADER_ELECTION=true
POD_NAME=${HOSTNAME}
SERVICE_ACCOUNT_NAME=acgs-service-account

#------------------------------------------------------------------------------
# DEVELOPMENT/DEBUGGING (disable in production)
#------------------------------------------------------------------------------
DEBUG=false
PYTHONDONTWRITEBYTECODE=1
PYTHONUNBUFFERED=1

# API Documentation
ENABLE_DOCS=false  # Set to true only for staging
ENABLE_REDOC=false  # Set to true only for staging

#------------------------------------------------------------------------------
# SECURITY HARDENING
#------------------------------------------------------------------------------
# Session Security
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=strict

# CSRF Protection
CSRF_PROTECTION_ENABLED=true

# Password Policy
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SYMBOLS=true

# Account Lockout
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=30

#------------------------------------------------------------------------------
# COMPLIANCE AND AUDITING
#------------------------------------------------------------------------------
# Compliance Standards
SOC2_COMPLIANCE=true
ISO27001_COMPLIANCE=true
GDPR_COMPLIANCE=true
HIPAA_COMPLIANCE=false

# Data Retention
DATA_RETENTION_POLICY_ENABLED=true
PERSONAL_DATA_RETENTION_DAYS=365
LOG_RETENTION_DAYS=90

# Privacy Settings
ANONYMIZE_LOGS=true
PII_DETECTION_ENABLED=true
DATA_ENCRYPTION_AT_REST=true

#------------------------------------------------------------------------------
# NOTIFICATION AND ALERTING
#------------------------------------------------------------------------------
# Email Configuration
SMTP_HOST=smtp.yourdomain.com
SMTP_PORT=587
SMTP_USER=alerts@yourdomain.com
SMTP_PASSWORD=CHANGE_ME_SMTP_PASSWORD
SMTP_TLS=true

# Slack Integration
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CHANNEL=#acgs-alerts

# PagerDuty Integration
PAGERDUTY_INTEGRATION_KEY=CHANGE_ME_PAGERDUTY_KEY

#------------------------------------------------------------------------------
# EXTERNAL INTEGRATIONS
#------------------------------------------------------------------------------
# Third-party API Keys (if needed)
OPENAI_API_KEY=CHANGE_ME_IF_USING_OPENAI
ANTHROPIC_API_KEY=CHANGE_ME_IF_USING_ANTHROPIC

# Certificate Management
CERT_MANAGER_ENABLED=true
CERT_RENEWAL_DAYS_BEFORE_EXPIRY=30

#------------------------------------------------------------------------------
# FEATURE FLAGS
#------------------------------------------------------------------------------
# Enable/disable features without code changes
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_REAL_TIME_MONITORING=true
FEATURE_AUTOMATED_SCALING=true
FEATURE_MULTI_REGION=false