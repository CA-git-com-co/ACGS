# Nginx Configuration for Mock Context Service
# Constitutional Hash: cdd01ef066bc6cf2

server {
    listen 80;
    server_name localhost;

    # Health check endpoint
    location /health {
        add_header Content-Type application/json;
        add_header X-Constitutional-Hash cdd01ef066bc6cf2;
        return 200 '{"status":"healthy","service":"acgs-context-service-mock","constitutional_hash":"cdd01ef066bc6cf2","timestamp":"2024-01-15T10:30:00Z"}';
    }

    # Context enrichment endpoint (mock)
    location /enrich {
        add_header Content-Type application/json;
        add_header X-Constitutional-Hash cdd01ef066bc6cf2;
        return 200 '{"enriched_context":"mock_enriched_context","confidence":0.95,"constitutional_hash":"cdd01ef066bc6cf2"}';
    }

    # Context search endpoint (mock)
    location /search {
        add_header Content-Type application/json;
        add_header X-Constitutional-Hash cdd01ef066bc6cf2;
        return 200 '{"results":[{"id":"1","content":"mock_context","score":0.9}],"total":1,"constitutional_hash":"cdd01ef066bc6cf2"}';
    }

    # Context analysis endpoint (mock)
    location /analyze {
        add_header Content-Type application/json;
        add_header X-Constitutional-Hash cdd01ef066bc6cf2;
        return 200 '{"analysis":"mock_analysis","insights":["insight1","insight2"],"constitutional_hash":"cdd01ef066bc6cf2"}';
    }

    # Default response for other endpoints
    location / {
        add_header Content-Type application/json;
        add_header X-Constitutional-Hash cdd01ef066bc6cf2;
        return 404 '{"error":"endpoint_not_found","constitutional_hash":"cdd01ef066bc6cf2"}';
    }
}
