# ACGS-2 Staging Environment Configuration
# Constitutional Hash: cdd01ef066bc6cf2
# Staging-specific environment variables

# Constitutional Compliance
CONSTITUTIONAL_HASH=cdd01ef066bc6cf2
ENVIRONMENT=staging

# Core Application Settings
DEBUG=false
LOG_LEVEL=INFO
RELOAD=false
WORKERS=2

# Database Configuration
POSTGRES_HOST=postgres
POSTGRES_PORT=5434
POSTGRES_DB=acgs_staging
POSTGRES_USER=acgs_staging
POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_POOL_SIZE=15
POSTGRES_MAX_OVERFLOW=30

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6381
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=0
REDIS_MAX_CONNECTIONS=100
REDIS_CACHE_TTL=7200

# Service URLs (Staging)
AUTH_SERVICE_URL=http://auth_service:8016
CONSTITUTIONAL_AI_URL=http://constitutional_ai:8001
INTEGRITY_SERVICE_URL=http://integrity_service:8002
FORMAL_VERIFICATION_URL=http://formal_verification:8003
GOVERNANCE_SYNTHESIS_URL=http://governance_synthesis:8004
POLICY_GOVERNANCE_URL=http://policy_governance:8005
EVOLUTIONARY_COMPUTATION_URL=http://evolutionary_computation:8006
CODE_ANALYSIS_URL=http://code_analysis:8007
MULTI_AGENT_COORDINATOR_URL=http://multi_agent_coordinator:8008
CONSENSUS_SERVICE_URL=http://consensus_service:8009
CONTEXT_ENGINE_URL=http://context_engine:8012

# MCP Service URLs
MCP_AGGREGATOR_URL=http://mcp_aggregator:3000
MCP_FILESYSTEM_URL=http://mcp_filesystem:3001
MCP_GITHUB_URL=http://mcp_github:3002
MCP_BROWSER_URL=http://mcp_browser:3003

# Monitoring URLs
PROMETHEUS_URL=http://prometheus:9090
GRAFANA_URL=http://grafana:3000
JAEGER_URL=http://jaeger:16686

# Performance Targets (Staging)
P99_LATENCY_TARGET_MS=7
THROUGHPUT_TARGET_RPS=75
CACHE_HIT_RATE_TARGET=0.80

# Security Settings
JWT_SECRET_KEY=${JWT_SECRET_KEY}
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=8
CORS_ORIGINS=["https://staging.acgs.internal", "https://staging-api.acgs.internal"]

# API Keys (Staging)
OPENAI_API_KEY=${OPENAI_API_KEY}
GROQ_API_KEY=${GROQ_API_KEY}
ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}

# Feature Flags
ENABLE_MOCK_SERVICES=false
ENABLE_DEBUG_ENDPOINTS=false
ENABLE_SWAGGER_UI=true
ENABLE_METRICS_COLLECTION=true
ENABLE_TRACING=true

# Staging Tools
ENABLE_HOT_RELOAD=false
ENABLE_AUTO_MIGRATION=false
ENABLE_SEED_DATA=false
ENABLE_TEST_ENDPOINTS=true

# Resource Limits (Staging)
MAX_MEMORY_MB=2048
MAX_CPU_CORES=2.0
MAX_CONCURRENT_REQUESTS=100

# Logging Configuration
LOG_FORMAT=json
LOG_FILE_PATH=/app/logs/acgs-staging.log
LOG_ROTATION_SIZE=50MB
LOG_RETENTION_DAYS=30

# Cache Configuration
CACHE_BACKEND=redis
CACHE_DEFAULT_TIMEOUT=1800
CACHE_KEY_PREFIX=acgs:staging:

# Session Configuration
SESSION_TIMEOUT_MINUTES=120
SESSION_CLEANUP_INTERVAL_MINUTES=30

# File Upload Configuration
MAX_FILE_SIZE_MB=50
ALLOWED_FILE_EXTENSIONS=.txt,.md,.json,.yaml,.yml,.py,.js,.ts,.pdf,.doc,.docx
UPLOAD_DIRECTORY=/app/uploads

# Staging Paths
ACGS_ROOT=/opt/acgs
ACGS_CONFIG_PATH=/opt/acgs/config
ACGS_LOGS_PATH=/var/log/acgs
ACGS_DATA_PATH=/var/lib/acgs
ACGS_BACKUP_PATH=/var/backup/acgs

# Docker Configuration
DOCKER_REGISTRY=registry.acgs.internal
DOCKER_TAG=staging
BUILD_TARGET=staging

# Testing Configuration
TEST_DATABASE_URL=postgresql+asyncpg://acgs_staging:${POSTGRES_PASSWORD}@postgres:5434/acgs_staging_test
TEST_REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6381/14
PYTEST_TIMEOUT=60
COVERAGE_THRESHOLD=80

# Staging Utilities
ENABLE_PROFILING=true
ENABLE_MEMORY_PROFILING=false
ENABLE_SQL_ECHO=false
ENABLE_QUERY_LOGGING=false

# Constitutional AI Staging Settings
CONSTITUTIONAL_FIDELITY_THRESHOLD=0.80
POLICY_QUALITY_THRESHOLD=0.75
GOVERNANCE_CONFIDENCE_THRESHOLD=0.80

# Multi-Agent Staging Settings
MAX_AGENT_INSTANCES=10
AGENT_TIMEOUT_SECONDS=60
COORDINATION_INTERVAL_SECONDS=15

# MCP Staging Settings
MCP_TIMEOUT_SECONDS=30
MCP_MAX_RETRIES=3
MCP_BATCH_SIZE=25

# Blockchain Staging Settings (if applicable)
BLOCKCHAIN_NETWORK=testnet
BLOCKCHAIN_RPC_URL=https://api.testnet.solana.com
SOLANA_KEYPAIR_PATH=/opt/acgs/keypairs

# External Service Configuration
MOCK_EXTERNAL_APIS=false
MOCK_RESPONSE_DELAY_MS=0
MOCK_FAILURE_RATE=0.0

# Staging Notifications
SLACK_WEBHOOK_URL=${SLACK_WEBHOOK_URL}
EMAIL_SMTP_HOST=${EMAIL_SMTP_HOST}
EMAIL_SMTP_PORT=587
EMAIL_FROM_ADDRESS=staging@acgs.internal

# Version Information
ACGS_VERSION=${ACGS_VERSION:-staging-latest}
BUILD_TIMESTAMP=${BUILD_TIMESTAMP}
GIT_COMMIT_HASH=${GIT_COMMIT_HASH}

# Constitutional Compliance Validation
CONSTITUTIONAL_VALIDATION_ENABLED=true
CONSTITUTIONAL_AUDIT_LEVEL=standard
CONSTITUTIONAL_METRICS_COLLECTION=true

# Monitoring and Alerting
PROMETHEUS_SCRAPE_INTERVAL=15s
PROMETHEUS_RETENTION=30d
GRAFANA_ADMIN_PASSWORD=${GRAFANA_PASSWORD}
ALERT_MANAGER_URL=http://alertmanager:9093

# Load Balancing
LOAD_BALANCER_ALGORITHM=round_robin
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# SSL/TLS Configuration
SSL_CERT_PATH=/etc/ssl/certs/acgs-staging.crt
SSL_KEY_PATH=/etc/ssl/private/acgs-staging.key
SSL_CA_PATH=/etc/ssl/certs/ca-bundle.crt

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=14
BACKUP_COMPRESSION=gzip

# Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=500
RATE_LIMIT_BURST=100
RATE_LIMIT_WINDOW_SECONDS=60

# Circuit Breaker Configuration
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=30
CIRCUIT_BREAKER_TIMEOUT=10

# Service Mesh Configuration
SERVICE_MESH_ENABLED=true
MTLS_ENABLED=true
TRAFFIC_POLICY=round_robin
RETRY_ATTEMPTS=3
RETRY_TIMEOUT=10s
