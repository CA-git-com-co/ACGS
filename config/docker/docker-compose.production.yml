version: "3.8"
services:
  postgres:
    ports:
      - 5439:5432
    environment:
      POSTGRES_USER: ${POSTGRESQL_USER}
      POSTGRES_PASSWORD: ${POSTGRESQL_PASSWORD}
      POSTGRES_DB: ${POSTGRESQL_DATABASE}
    deploy:
      resources:
        limits:
          memory: 2G
          cpus: "1.0"
        reservations:
          memory: 1G
          cpus: "0.5"
  redis:
    ports:
      - 6389:6379
    environment:
      REDIS_PASSWORD: ${REDIS_PASSWORD}
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: "0.5"
  auth-service:
    ports:
      - 8016:8016
    environment:
      CONSTITUTIONAL_HASH: cdd01ef066bc6cf2
      ENVIRONMENT: production
      DEBUG: false
  constitutional-ai-service:
    ports:
      - 8001:8001
    environment:
      CONSTITUTIONAL_HASH: cdd01ef066bc6cf2
      ENVIRONMENT: production
      DEBUG: false
networks:
  default:
    name: acgs_production_network
constitutional_hash: cdd01ef066bc6cf2
